_format_version: "3.0"
_transform: true

services:
  - name: products-service
    url: http://products:3000
    routes:
      - name: products-route
        paths:
          - /products
        strip_path: false
        methods:
          - GET
          - POST
          - PUT
          - DELETE
    plugins:
      - name: rate-limiting
        config:
          minute: 10
          policy: local
      - name: request-size-limiting
        config:
          allowed_payload_size: 200

  - name: users-service
    url: http://users:3000
    routes:
      - name: users-route
        paths:
          - /users
        strip_path: false
        methods:
          - GET
          - POST
          - PUT
          - DELETE
    plugins:
      - name: rate-limiting
        config:
          minute: 10
          policy: local
      - name: request-size-limiting
        config:
          allowed_payload_size: 200

  - name: orders-service
    url: http://orders:3000
    routes:
      - name: orders-route
        paths:
          - /orders
        strip_path: false
        methods:
          - GET
          - POST
          - PUT
          - DELETE
    plugins:
      - name: rate-limiting
        config:
          minute: 10
          policy: local
      - name: request-size-limiting
        config:
          allowed_payload_size: 200

  - name: payments-service
    url: http://payments:3000
    routes:
      - name: payments-route
        paths:
          - /payments
        strip_path: false
        methods:
          - GET
          - POST
          - PUT
          - DELETE
    plugins:
      - name: rate-limiting
        config:
          minute: 10
          policy: local
      - name: request-size-limiting
        config:
          allowed_payload_size: 200
